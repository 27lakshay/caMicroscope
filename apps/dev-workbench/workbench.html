<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dev-Workbench</title>
    <link rel="stylesheet" href="./workbench.css" />
    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.2/css/all.css"
    />
    <!-- Google Fonts -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
    />
    <!-- Bootstrap core CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Material Design Bootstrap -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/css/mdb.min.css"
      rel="stylesheet"
    />
    <!-- JQuery -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    ></script>
    <!-- Bootstrap tooltips -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.4/umd/popper.min.js"
    ></script>
    <!-- Bootstrap core JavaScript -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"
    ></script>
    <!-- MDB core JavaScript -->
    <script
      type="text/javascript"
      src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.19.0/js/mdb.min.js"
    ></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link
      href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css"
      rel="stylesheet"
    />
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />
    <script src="../../common/jszip.min.js"></script>
    <script src="../../common/FileSaver.min.js"></script>
  </head>
  <body>
    <!--Navbar-->
    <nav
      class="navbar navbar-expand-lg navbar-dark"
      style="background: rgb(33, 37, 41);"
    >
      <a href="../table.html"
        ><i data-feather="arrow-left" class="text-white"></i>
      </a>
      &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
      <!-- Navbar brand -->
      <a class="navbar-brand" href="#"> Workbench</a>
    </nav>
    <!--/.Navbar-->

    <div id="headbar">
      <br />
      <div id="headContent" style="font-size: xx-large;">
        Welcome to <b>Development Workbench</b>
      </div>
      <div id="headSub" style="font-size: large;">
        Create your own ML models in 3 simple steps
      </div>
      <br />
    </div>

    <!-- Vertical Steppers -->
    <div id="stepper">
      <div class="row mt-1" style="max-width: 90%; margin: 0 auto;">
        <div class="col-md-12">
          <!-- Steppers Wrapper -->
          <ul class="stepper stepper-vertical">
            <!-- First Step -->
            <li class="active firstStepHead">
              <a href="#" onclick="dataSelect();">
                <span class="circle">1</span>
                <span class="label">Select/Create Training Data</span>
              </a>
              <div class="step-content grey lighten-3">
                <p style="font-size: 1em;">
                  Select your own dataset (spritesheet) or create a new one from
                  caMicroscope labels or own custom data. <br />
                  <button
                    id="firstStepButton"
                    onclick="dataSelect();"
                    style="
                      border-radius: 50%;
                      padding: 1em;
                      margin-bottom: -1em;
                    "
                    type="button"
                    class="btn btn-primary"
                  >
                    <i data-feather="chevron-right" class="text-white"></i>
                  </button>
                </p>
              </div>
            </li>

            <!-- Second Step -->
            <li class="secondStepHead">
              <!--Section Title -->
              <a href="#!">
                <span class="circle">2</span>
                <span class="label">Algorithm Creation and Training</span>
              </a>

              <!-- Section Description -->
              <div class="step-content grey lighten-3">
                <p style="font-size: 1em;">
                  Create your own customized CNN algorithm and train your model
                  accordingly. <br />
                  <a
                    id="secondStepButton"
                    href="./createAlgo/bench.html"
                    style="display: none;"
                  >
                    <button
                      style="
                        border-radius: 50%;
                        padding: 1em;
                        margin: -1em 0em -3em -1em;
                      "
                      type="button"
                      class="btn btn-primary"
                    >
                      <i
                        data-feather="chevron-right"
                        class="text-white"
                      ></i></button
                  ></a>
                </p>
              </div>
            </li>

            <!-- Third Step -->
            <li class="thirdStepHead">
              <a href="#!">
                <span class="circle">3</span>
                <span class="label">Save your work </span>
              </a>
              <!-- Section Description -->
              <div class="step-content grey lighten-3">
                <p style="font-size: 1em;">
                  Save your model to use it in caMicroscope or save your
                  workbench to continue the work later. <br />
                  <button
                    id="thirdStepButton"
                    style="
                      border-radius: 50%;
                      padding: 1em;
                      margin-bottom: -1em;
                      display: none;
                    "
                    type="button"
                    class="btn btn-primary"
                  >
                    <i data-feather="chevron-right" class="text-white"></i>
                  </button>
                </p>
              </div>
            </li>
          </ul>
          <!-- /.Stepers Wrapper -->
        </div>
      </div>
    </div>
    <!-- /.Vertical Steppers -->
    <div id="cards" style="display: none;">
      <br /><br />
      <div
        style="
          align-content: center;
          display: flex;
          flex-wrap: wrap;
          padding: 1em;
        "
      >
        <!-- Cards -->
        <div class="card" style="max-width: 20em; margin: 0 auto;">
          <!-- Card content -->
          <div class="card-body">
            <!-- Title -->
            <h4 class="card-title">Select your dataset</h4>
            <!-- Text -->
            <p style="text-align: justify;" class="card-text">
              Select the dataset(.zip) including two files; spritesheet(.jpg)
              and a binary labels file from your local storage.
            </p>
            <br />
            <div class="input-group">
              <div class="custom-file">
                <input
                  type="file"
                  id="spriteInput"
                  accept=".zip"
                  style="max-width: 98%;"
                />
                <label
                  class="custom-file-label spriteInputLabel"
                  for="spriteInput"
                  >Choose file
                </label>
              </div>
            </div>
          </div>
        </div>
        <div style="height: 13em; padding: 6em 0; font-size: large;">
          <b> OR</b>
        </div>
        <div class="card" style="max-width: 20em; margin: 0 auto;">
          <!-- Card content -->
          <div class="card-body">
            <!-- Title -->
            <h4 class="card-title">Create your own</h4>
            <!-- Text -->
            <p class="card-text" style="text-align: justify;">
              Build your own spritesheet using labeling from the caMicroscope
              instance or browsing your own dataset.
            </p>
            <!-- Buttons -->
            <div style="text-align: center;">
              <button
                data-toggle="modal"
                data-target="#labelsUploadModal"
                style="border-radius: 5px; font-size: 0.9em;"
                class="btn btn-primary px-2"
                onclick="resetLabelsModel()"
              >
                caM Labels
              </button>
              <button
                style="border-radius: 5px; font-size: 0.9em;"
                class="btn btn-primary px-2"
              >
                Custom Data
              </button>
            </div>
          </div>
        </div>
        <!-- Cards -->
      </div>
    </div>

    <!-- Labels Upload Modal -->
    <div
      class="modal fade"
      id="labelsUploadModal"
      tabindex="-1"
      role="dialog"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">
              Select your labels
            </h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <form
            id="labelsUploadForm"
            onsubmit="return false"
            method="post"
            enctype="multipart/form-data"
          >
            <div class="modal-body">
              <div class="labelsInputGroup">
                Browse your labelling files(.zip) created by the caMicroscope
                labelling tool. <br />
                <br />
                <div class="input-group">
                  <div class="custom-file">
                    <input
                      multiple
                      type="file"
                      id="labelsInput"
                      accept=".zip"
                      required
                    />
                    <label
                      class="custom-file-label labelsInputLabel"
                      for="labelsInput"
                      >Choose files
                    </label>
                  </div>
                </div>
              </div>
              <div id="filterLabels" style="display: none;">
                Select the labels you want to include in the dataset. <br />
                <br />
                <ul id="labelsFilterList" class="list-group"></ul>
              </div>
              <div id="labelsDatasetZip" style="display: none;">
                The spritesheet (.jpg) and labels (binary) files have been
                created according to your customized data. Download the .zip
                file and select it in the "Select your dataset" section on this
                page. <br />
                Click on "Done" after the download is finished. <br />
                <br />
              </div>
              <br />
            </div>
            <div class="modal-footer">
              <button
                id="labelsSubmitButton"
                type="submit"
                class="btn btn-success"
                style="padding: 0.6em; font-size: 1em; border-radius: 5px;"
              >
                <div id="labelsSubmitText">
                  Next <i data-feather="chevron-right" class="text-white"></i>
                </div>
                <div
                  id="labelsSubmitLoading"
                  class="spinner-border"
                  role="status"
                  style="display: none;"
                >
                  <span class="sr-only">Loading...</span>
                </div>
                <div id="labelsSubmitFinish" style="display: none;">
                  Done <i data-feather="check" class="text-white"></i>
                </div>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="./workbench.js"></script>
    <script>
      feather.replace(); // for feather Icons
    </script>
  </body>
</html>
