<!DOCTYPE html>
<html lang="en" >

 <head>
  <meta charset="utf-8" />
  <meta name="DC.creator" content="Ruven Pillay &lt;ruven@users.sourceforge.netm&gt;"/>
  <meta name="DC.title" content="IIPMooViewer 2.0: HTML5 High Resolution Image Viewer"/>
  <meta name="DC.subject" content="IIPMooViewer; IIPImage; Visualization; HTML5; Ajax; High Resolution; Internet Imaging Protocol; IIP"/>
  <meta name="DC.description" content="IIPMooViewer is an advanced javascript HTML5 image viewer for streaming high resolution scientific images"/>
  <meta name="DC.rights" content="Copyright &copy; 2003-2012 Ruven Pillay"/>
  <meta name="DC.source" content="http://iipimage.sourceforge.net"/>
  <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta http-equiv="X-UA-Compatible" content="IE=9" />

  <link rel="stylesheet" type="text/css" media="all" href="css/iip2.css" />
  <link rel="stylesheet" type="text/css" media="all" href="css/moreImages.css" />
<!--[if lt IE 10]>
  <link rel="stylesheet" type="text/css" media="all" href="css/ie.compressed.css" />
<![endif]-->

  <link rel="shortcut icon" href="images/iip-favicon.png" />
  <link rel="apple-touch-icon" href="images/iip.png" />

  <title>IIPMooViewer 2.0 :: HTML5 High Resolution Image Viewer</title>

  <script type="text/javascript" src="js/mootools-core-1.4.5-full-nocompat-yc.js"></script>
  <script type="text/javascript" src="js/mootools-more-1.4.0.1-compressed.js"></script>
  <script type="text/javascript" src="js/iipmooviewer-2.0.js"></script>
  <script type="text/javascript" src="js/annotations.js"></script>
  <script type="text/javascript" src="js/saveAnnotations.js"></script>
  <script type="text/javascript" src="js/drawMarkups.js"></script>
  <script type="text/javascript" src="js/tools.js"></script>
  <script type="text/javascript" src="js/edit.js"></script>
  <script type="text/javascript" src="js/moreImages.js"></script>

<!--[if lt IE 7]>
  <script src="http://ie7-js.googlecode.com/svn/version/2.1(beta4)/IE7.js">IE7_PNG_SUFFIX = ".png";</script>
<![endif]-->

  <script type="text/javascript">

    // The *full* image path on the server. This path does *not* need to be in the web
    // server root directory. On Windows, use Unix style forward slash paths without
    // the "c:" prefix
    function gup( name )
	{
	  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
	  var regexS = "[\\?&]"+name+"=([^&#]*)";
	  var regex = new RegExp( regexS );
	  var results = regex.exec( window.location.href );
	  if( results == null )
	    return "";
	  else
	    return results[1];
    }
    var image=gup('location');//image location
    var iid=gup('iid');//image id
    // Copyright or information message
    var credit = '&copy; copyright or information message';
    var iip;
    var IP='http://170.140.138.125';
    var jsonRequest = new Request.JSON({url: IP+'/bio/api/annotation.php', onSuccess: function(e){
	var annot=e;
	if((annot==null)||(annot=='NoAnnotations')) annot=new Array();
	iip= new IIPMooViewer( "viewer", {
				image: image,
				credit: credit,
		                annotations:annot
			    });
        iip.iid=iid;//assign image id to the iipmooviewer
	}}).get({'iid':iid});
  </script>

  <style type="text/css">
    body{
	height: 100%;
	padding: 0;
	margin: 0;
    }
    div#viewer{
	height: 100%;
	min-height: 100%;
	width: 100%;
	position: absolute;
	top: 0;
	left: 0;
	margin: 0;
	padding: 0;
    }	
    div#show
    {
        position:absolute;
        width:20px;
        height:40px;
 	left:40px;
	top:10px;
	z-index:5;
    }
    div#tool
    {
	position:absolute;
	color:white;
	left:60px;
	top:10px;
	z-index:5;
        width:180px;
    }
    .slider
    {
          margin: 1px;
	  border: 1px outset #333;
	  color: #fff;
	  background: #222;
	  opacity: 0.85;
	  font-weight: normal;
	  padding: 1px;
	  font-size: 80%;
	  -moz-border-radius: 0.3em;
	  -webkit-border-radius: 0.3em;
	  border-radius: 0.3em;
	  -moz-box-shadow: 4px 4px 4px rgba(0,0,0,0.75);
	  -webkit-box-shadow: 4px 4px 4px rgba(0,0,0,0.75);
	  -o-box-shadow: 4px 4px 4px rgba(0,0,0,0.75);
	  box-shadow: 4px 4px 4px rgba(0,0,0,0.75);
	  text-shadow: 0.5px 0.5px 0 grey;
    }
    .tiplayer
    {
	position:absolute;
	top:80%;
	left:40%;
	z-index:2;
    }
    .selected
    {
	   background: #fff;
	   cursor: pointer;
    }
    .magnify
    {
	position:absolute;
	width:200px;
	-webkit-border-radius: 20em;
	-moz-border-radius: 20em;
	border-color: transparent;
	height:200px;
	z-index:2;
    }
    
  </style>

 </head>

 <body>
   <div id="viewer"></div>
   <div id="show" onmouseover="newtool('tool',iip)"></div>
   <div id="tool"></div>
   <div id="meta" class="slider" style="position:absolute;width:100%;height:15px;bottom:0%;color:white;z-index:5">
        <hr id="v_toggle"/>
        <div id="metadata"></div>
   </div>
 </body>

</html>
