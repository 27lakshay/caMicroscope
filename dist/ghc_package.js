parcelRequire=function(e,r,n,t){var i="function"==typeof parcelRequire&&parcelRequire,o="function"==typeof require&&require;function u(n,t){if(!r[n]){if(!e[n]){var f="function"==typeof parcelRequire&&parcelRequire;if(!t&&f)return f(n,!0);if(i)return i(n,!0);if(o&&"string"==typeof n)return o(n);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[n][1][r]||r};var l=r[n]=new u.Module(n);e[n][0].call(l.exports,p,l,l.exports,this)}return r[n].exports;function p(e){return u(p.resolve(e))}}u.isParcelRequire=!0,u.Module=function(e){this.id=e,this.bundle=u,this.exports={}},u.modules=e,u.cache=r,u.parent=i,u.register=function(r,n){e[r]=[function(e,r){r.exports=n},{}]};for(var f=0;f<n.length;f++)u(n[f]);if(n.length){var c=u(n[n.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=c:"function"==typeof define&&define.amd?define(function(){return c}):t&&(this[t]=c)}return u}({"FfXV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function r(e,i,s,a,o){t(this,r),this.viewer=o,this.project=e,this.location=i,this.dataset=s,this.store=a,this.COLUMN_POSITION_TAG="0048021E",this.COLUMNS_TAG="00280011",this.FUNCTIONAL_GROUP_SEQUENCE_TAG="52009230",this.PLANE_POSITION_SEQUENCE_TAG="0048021A",this.ROW_POSITION_TAG="0048021F",this.ROWS_TAG="00280010",this.SERIES_INSTANCE_UID_TAG="0020000E",this.SOP_INSTANCE_UID_TAG="00080018",this.STUDY_INSTANCE_UID_TAG="0020000D",this.TOTAL_PIXEL_MATRIX_COLUMNS_TAG="00480006",this.TOTAL_PIXEL_MATRIX_ROWS_TAG="00480007",this.updatedDicomUrl="https://healthcare.googleapis.com/v1beta1/projects/";var n=RegExp("GHCToken[^;]+").exec(document.cookie);this.token=decodeURIComponent(n?n.toString().replace(/^[^=]+./,""):"")}return e(r,[{key:"toDicomWebQIDOUrl",value:function(e){return this.updatedDicomUrl+e+"?includefield=all&access_token="+this.token}},{key:"toDicomWebWADOUrl",value:function(e){return this.updatedDicomUrl+e+"?access_token="+this.token}},{key:"loadInstancesInStudy",value:function(e){var t="/"+this.project+"/locations/"+this.location+"/datasets/"+this.dataset+"/dicomStores/test1/"+this.store+"/studies/"+e+"/series";$.ajax({url:this.toDicomWebQIDOUrl(t),error:function(e){alert("Error - retrieving series failed: "+e.responseJSON[0].error.code+" "+e.responseJSON[0].error.message)},success:function(e){var r=t+"/"+e[0][this.SERIES_INSTANCE_UID_TAG].Value[0]+"/instances";$.ajax({url:toDicomWebQIDOUrl(r),error:function(e){alert("Error - retrieving instances failed: "+e.responseJSON[0].error.code+" "+e.responseJSON[0].error.message)},success:function(e){try{for(var t=0,i=0,s=0,a=0,o=new Set,n=0;n<e.length;n++){var u=Number(e[n][this.TOTAL_PIXEL_MATRIX_COLUMNS_TAG].Value);o.add(u);var l=Number(e[n][this.TOTAL_PIXEL_MATRIX_ROWS_TAG].Value);u>t&&(t=u),l>i&&(i=l),s=Number(e[n][this.COLUMNS_TAG].Value),a=Number(e[n][this.ROWS_TAG].Value)}var c=Array.from(o.values());c.sort(function(e,t){return t-e});var _=o.size,h=this.calculatePyramidMeta(e,c);tileSource={height:i,width:t,tileSize:s,maxLevel:_-1,minLevel:0,getTileUrl:function(e,t,i){var o=h[1+s*t+"/"+(1+a*i)+"/"+(_-1-e)];return this.toDicomWebWADOUrl(r+"/"+o.SOPInstanceUID+"/frames/"+o.FrameNumber+"/rendered")}.bind(this),getLevelScale:function(e){return c[_-1-e]/t}},viewer.open(tileSource)}catch(e){alert("Could not parse DICOM for study, possible reason: DICOM is not\n                   pathology or damaged image.")}}.bind(this)})}.bind(this)})}},{key:"calculatePyramidMeta",value:function(e,t){for(var r={},i=0;i<t.length;i++)r[t[i]]=i;for(var s={},a=0;a<e.length;a++)for(var o=e[a][this.SOP_INSTANCE_UID_TAG].Value,n=e[a][this.FUNCTIONAL_GROUP_SEQUENCE_TAG].Value,u=0;u<n.length;u++){var l=u+1,c=n[u][this.PLANE_POSITION_SEQUENCE_TAG].Value[0][this.COLUMN_POSITION_TAG].Value,_=n[u][this.PLANE_POSITION_SEQUENCE_TAG].Value[0][this.ROW_POSITION_TAG].Value,h=Number(e[a][this.TOTAL_PIXEL_MATRIX_COLUMNS_TAG].Value);s[c+"/"+_+"/"+t.indexOf(h)]={SOPInstanceUID:o,FrameNumber:l}}return s}}]),r}();exports.default=r;
},{}],"8RL4":[function(require,module,exports) {
"use strict";var t=require("./GHCHelpers.js"),s=i(t);function i(t){return t&&t.__esModule?t:{default:t}}CaMic.prototype.loadImg=function(t){var i=urlParams.get("id");this.slideId=i,this.slideName=i,this.study="",this.specimen="",this.project="public-datasets-194701",this.locaion="us-central1",this.data_store="test1",this.dataset="rbirmin_dicom_test",this.ghc_study="1.2.276.0.7230010.3.1.2.1784940379.231387.1533066220.970617",this.mpp=1e9,this.mpp_x=this.mpp,this.mpp_y=this.mpp,new s.default(this.project,this.location,this.dataset,this.data_store,this.viewer).loadInstancesInStudy(this.ghc_study);var e={};e._id=this.slideId,e.name=this.slideName,e.study=this.study,e.specimen=this.specimen,e.mpp=this.mpp,e.mpp_x=this.mpp_x,e.mpp_y=this.mpp_y,e.location="GHC--"+this.slideId,e.url="WHOOPS",t&&"function"==typeof t&&t.call(null,e)};
},{"./GHCHelpers.js":"FfXV"}]},{},["8RL4"], null)
//# sourceMappingURL=/ghc_package.map